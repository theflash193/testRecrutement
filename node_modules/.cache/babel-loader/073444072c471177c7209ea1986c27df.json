{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\gordon\\\\Desktop\\\\testRecrutement\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\gordon\\\\Desktop\\\\testRecrutement\\\\src\\\\screens\\\\Articles.js\";\nimport React, { Component } from 'react';\nimport Card from '../components/Card.js';\nimport { Spinner, Row, Col, Container } from 'react-bootstrap';\nconst INITIAL_STATE = {\n  articles: [],\n  filterArticles: [],\n  selectedArticles: [],\n  filter: \"\",\n  isLoaded: true,\n  isSucceed: false,\n  error: {}\n};\n\nclass Articles extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handlerFilter = e => {\n      let filter;\n      e.preventDefault();\n\n      if (e.target.value === \"\") {\n        this.setState(_objectSpread({}, this.state, {\n          filter: \"\",\n          filterArticles: this.state.articles\n        }));\n      } else {\n        filter = this.state.articles.filter(article => article.title.includes(e.target.value));\n        this.setState(_objectSpread({}, this.state, {\n          filter: e.target.value,\n          filterArticles: filter\n        }));\n      }\n    };\n\n    this.HandlerAddArticle = (e, id) => {\n      let index;\n      let updateArray;\n      e.preventDefault();\n\n      if (this.state.articles.indexOf(article => article.id === id) === -1) {\n        // updateArray = this.state.selectedArticles.push(this.state.articles[id])\n        this.setState(_objectSpread({}, this.state, {\n          filterArticles: this.state.selectedArticles.concat(this.state.articles[id])\n        }));\n      } else {\n        index = this.state.selectedArticles.indexOf(article => article.id === id);\n        updateArray = this.state.selectedArticles.filter(article => article.id === index);\n        this.setState(_objectSpread({}, this.state, {\n          selectedArticles: updateArray\n        }));\n      }\n    };\n\n    this.state = INITIAL_STATE;\n  }\n\n  componentDidMount() {\n    fetch(\"http://henri-potier.xebia.fr/books\").then(data => data.json()).then(data => {\n      // Adding id property for each article\n      const articles = data.map((article, index) => {\n        const a = _objectSpread({}, article, {\n          id: index\n        });\n\n        return a;\n      });\n      this.setState(_objectSpread({}, this.state, {\n        articles: articles,\n        filterArticles: articles,\n        isSucceed: true\n      }));\n    }).catch(err => this.setState(_objectSpread({}, INITIAL_STATE, {\n      error: err,\n      isSucceed: false\n    })));\n  }\n\n  render() {\n    console.log(this.state);\n    const Cards = this.state.isSucceed && this.state.filterArticles !== undefined ? this.state.filterArticles.map((article, index) => {\n      console.log(this);\n      return React.createElement(Card, {\n        key: index.toString(),\n        article: article,\n        onClick: e => {\n          this.HandlerAddArticle(e, index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      });\n    }) : React.createElement(Spinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    });\n    console.log(this.state); // console.log(this.HandlerAddArticle(2));\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 3,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Recherche :\"), React.createElement(\"input\", {\n      style: {\n        height: 40,\n        width: \"100%\"\n      },\n      type: \"search\",\n      placeholder: \"sorcier\",\n      onChange: e => {\n        this.handlerFilter(e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    })), React.createElement(Col, {\n      lg: 9,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, Cards))))));\n  }\n\n}\n\nexport default Articles;","map":{"version":3,"sources":["C:/Users/gordon/Desktop/testRecrutement/src/screens/Articles.js"],"names":["React","Component","Card","Spinner","Row","Col","Container","INITIAL_STATE","articles","filterArticles","selectedArticles","filter","isLoaded","isSucceed","error","Articles","constructor","props","handlerFilter","e","preventDefault","target","value","setState","state","article","title","includes","HandlerAddArticle","id","index","updateArray","indexOf","concat","componentDidMount","fetch","then","data","json","map","a","catch","err","render","console","log","Cards","undefined","toString","height","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Card from '../components/Card.js';\r\nimport { Spinner, Row, Col, Container } from 'react-bootstrap';\r\n\r\nconst INITIAL_STATE = {\r\n    articles: [],\r\n    filterArticles: [],\r\n    selectedArticles: [],\r\n    filter: \"\",\r\n    isLoaded: true,\r\n    isSucceed: false,\r\n    error: {},\r\n}\r\n\r\nclass Articles extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = INITIAL_STATE;\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(\"http://henri-potier.xebia.fr/books\")\r\n            .then(data => data.json())\r\n            .then(data => {\r\n                // Adding id property for each article\r\n                const articles = data.map((article, index) => { const a = {...article, id: index} ; return a});\r\n\r\n                this.setState({ ...this.state, articles: articles, filterArticles: articles, isSucceed: true })\r\n            })\r\n            .catch(err => this.setState({ ...INITIAL_STATE, error: err , isSucceed: false}))\r\n    }\r\n\r\n    handlerFilter = (e) => {\r\n        let filter;\r\n        \r\n        e.preventDefault();\r\n        if (e.target.value === \"\") { \r\n            this.setState({ ...this.state, filter: \"\", filterArticles: this.state.articles})\r\n        } else {\r\n            filter = this.state.articles.filter(article => article.title.includes(e.target.value));\r\n            this.setState({ ...this.state, filter: e.target.value, filterArticles: filter});\r\n        }\r\n    }\r\n\r\n    HandlerAddArticle = (e, id) => {\r\n        let index;\r\n        let updateArray;\r\n\r\n        e.preventDefault();\r\n        if (this.state.articles.indexOf(article => article.id === id) === -1) {\r\n            // updateArray = this.state.selectedArticles.push(this.state.articles[id])\r\n            this.setState({...this.state, filterArticles: this.state.selectedArticles.concat(this.state.articles[id])})\r\n        } else { \r\n            index = this.state.selectedArticles.indexOf(article => article.id === id);\r\n            updateArray = this.state.selectedArticles.filter(article => article.id === index);\r\n            this.setState({...this.state, selectedArticles: updateArray})\r\n        }\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state);\r\n        const Cards = (this.state.isSucceed && this.state.filterArticles !== undefined) ? \r\n            this.state.filterArticles.map((article, index) => {\r\n                console.log(this); \r\n            return <Card key={index.toString()} article={article} onClick={(e) => {this.HandlerAddArticle(e, index)}}></Card> \r\n            })\r\n            :\r\n            <Spinner></Spinner>;\r\n\r\n        console.log(this.state);\r\n        // console.log(this.HandlerAddArticle(2));\r\n        return (<div>\r\n                <Container>\r\n                    <Row>\r\n                        <Col lg={3} xs={12}>\r\n                            <p>Recherche :</p>\r\n                            <input style={{height: 40, width: \"100%\"}} type=\"search\" placeholder=\"sorcier\" onChange={(e) => {this.handlerFilter(e)}}></input>\r\n                        </Col>\r\n                        <Col lg={9} xs={12}>\r\n                            <Container>\r\n                                <Row>\r\n                                        {Cards}\r\n                                </Row>\r\n                            </Container>\r\n                        </Col >\r\n                    </Row>\r\n                </Container>\r\n            </div>);\r\n    }\r\n}\r\n\r\nexport default Articles;\r\n"]},"metadata":{},"sourceType":"module"}