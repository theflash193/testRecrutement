{"ast":null,"code":"'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _object = require('object.assign');\n\nvar _object2 = _interopRequireDefault(_object);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _server = require('react-dom/server');\n\nvar _server2 = _interopRequireDefault(_server);\n\nvar _shallow = require('react-test-renderer/shallow');\n\nvar _shallow2 = _interopRequireDefault(_shallow);\n\nvar _package = require('react-test-renderer/package.json');\n\nvar _testUtils = require('react-dom/test-utils');\n\nvar _testUtils2 = _interopRequireDefault(_testUtils);\n\nvar _semver = require('semver');\n\nvar _semver2 = _interopRequireDefault(_semver);\n\nvar _checkPropTypes2 = require('prop-types/checkPropTypes');\n\nvar _checkPropTypes3 = _interopRequireDefault(_checkPropTypes2);\n\nvar _has = require('has');\n\nvar _has2 = _interopRequireDefault(_has);\n\nvar _reactIs = require('react-is');\n\nvar _enzyme = require('enzyme');\n\nvar _Utils = require('enzyme/build/Utils');\n\nvar _enzymeShallowEqual = require('enzyme-shallow-equal');\n\nvar _enzymeShallowEqual2 = _interopRequireDefault(_enzymeShallowEqual);\n\nvar _enzymeAdapterUtils = require('enzyme-adapter-utils');\n\nvar _findCurrentFiberUsingSlowPath = require('./findCurrentFiberUsingSlowPath');\n\nvar _findCurrentFiberUsingSlowPath2 = _interopRequireDefault(_findCurrentFiberUsingSlowPath);\n\nvar _detectFiberTags = require('./detectFiberTags');\n\nvar _detectFiberTags2 = _interopRequireDefault(_detectFiberTags);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* eslint no-use-before-define: 0 */\n// eslint-disable-next-line import/no-unresolved\n// eslint-disable-next-line import/no-unresolved\n// eslint-disable-next-line import/no-unresolved\n\n\nvar is164 = !!_testUtils2['default'].Simulate.touchStart; // 16.4+\n\nvar is165 = !!_testUtils2['default'].Simulate.auxClick; // 16.5+\n\nvar is166 = is165 && !_react2['default'].unstable_AsyncMode; // 16.6+\n\nvar is168 = is166 && typeof _testUtils2['default'].act === 'function';\n\nvar hasShouldComponentUpdateBug = _semver2['default'].satisfies(_package.version, '< 16.8'); // Lazily populated if DOM is available.\n\n\nvar FiberTags = null;\n\nfunction nodeAndSiblingsArray(nodeWithSibling) {\n  var array = [];\n  var node = nodeWithSibling;\n\n  while (node != null) {\n    array.push(node);\n    node = node.sibling;\n  }\n\n  return array;\n}\n\nfunction flatten(arr) {\n  var result = [];\n  var stack = [{\n    i: 0,\n    array: arr\n  }];\n\n  while (stack.length) {\n    var n = stack.pop();\n\n    while (n.i < n.array.length) {\n      var el = n.array[n.i];\n      n.i += 1;\n\n      if (Array.isArray(el)) {\n        stack.push(n);\n        stack.push({\n          i: 0,\n          array: el\n        });\n        break;\n      }\n\n      result.push(el);\n    }\n  }\n\n  return result;\n}\n\nfunction nodeTypeFromType(type) {\n  if (type === _reactIs.Portal) {\n    return 'portal';\n  }\n\n  return (0, _enzymeAdapterUtils.nodeTypeFromType)(type);\n}\n\nfunction unmemoType(type) {\n  return (0, _reactIs.isMemo)(type) ? type.type : type;\n}\n\nfunction elementToTree(el) {\n  if (!(0, _reactIs.isPortal)(el)) {\n    return (0, _enzymeAdapterUtils.elementToTree)(el, elementToTree);\n  }\n\n  var children = el.children,\n      containerInfo = el.containerInfo;\n  var props = {\n    children: children,\n    containerInfo: containerInfo\n  };\n  return {\n    nodeType: 'portal',\n    type: _reactIs.Portal,\n    props: props,\n    key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(el.key),\n    ref: el.ref || null,\n    instance: null,\n    rendered: elementToTree(el.children)\n  };\n}\n\nfunction _toTree(vnode) {\n  if (vnode == null) {\n    return null;\n  } // TODO(lmr): I'm not really sure I understand whether or not this is what\n  // i should be doing, or if this is a hack for something i'm doing wrong\n  // somewhere else. Should talk to sebastian about this perhaps\n\n\n  var node = (0, _findCurrentFiberUsingSlowPath2['default'])(vnode);\n\n  switch (node.tag) {\n    case FiberTags.HostRoot:\n      return childrenToTree(node.child);\n\n    case FiberTags.HostPortal:\n      {\n        var containerInfo = node.stateNode.containerInfo,\n            children = node.memoizedProps;\n        var props = {\n          containerInfo: containerInfo,\n          children: children\n        };\n        return {\n          nodeType: 'portal',\n          type: _reactIs.Portal,\n          props: props,\n          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),\n          ref: node.ref,\n          instance: null,\n          rendered: childrenToTree(node.child)\n        };\n      }\n\n    case FiberTags.ClassComponent:\n      return {\n        nodeType: 'class',\n        type: node.type,\n        props: (0, _object2['default'])({}, node.memoizedProps),\n        key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child)\n      };\n\n    case FiberTags.FunctionalComponent:\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: (0, _object2['default'])({}, node.memoizedProps),\n        key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child)\n      };\n\n    case FiberTags.MemoClass:\n      return {\n        nodeType: 'class',\n        type: node.elementType.type,\n        props: (0, _object2['default'])({}, node.memoizedProps),\n        key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child.child)\n      };\n\n    case FiberTags.MemoSFC:\n      {\n        var renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(_toTree));\n\n        if (renderedNodes.length === 0) {\n          renderedNodes = [node.memoizedProps.children];\n        }\n\n        return {\n          nodeType: 'function',\n          type: node.elementType,\n          props: (0, _object2['default'])({}, node.memoizedProps),\n          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),\n          ref: node.ref,\n          instance: null,\n          rendered: renderedNodes\n        };\n      }\n\n    case FiberTags.HostComponent:\n      {\n        var _renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(_toTree));\n\n        if (_renderedNodes.length === 0) {\n          _renderedNodes = [node.memoizedProps.children];\n        }\n\n        return {\n          nodeType: 'host',\n          type: node.type,\n          props: (0, _object2['default'])({}, node.memoizedProps),\n          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),\n          ref: node.ref,\n          instance: node.stateNode,\n          rendered: _renderedNodes\n        };\n      }\n\n    case FiberTags.HostText:\n      return node.memoizedProps;\n\n    case FiberTags.Fragment:\n    case FiberTags.Mode:\n    case FiberTags.ContextProvider:\n    case FiberTags.ContextConsumer:\n      return childrenToTree(node.child);\n\n    case FiberTags.Profiler:\n    case FiberTags.ForwardRef:\n      {\n        return {\n          nodeType: 'function',\n          type: node.type,\n          props: (0, _object2['default'])({}, node.pendingProps),\n          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),\n          ref: node.ref,\n          instance: null,\n          rendered: childrenToTree(node.child)\n        };\n      }\n\n    case FiberTags.Suspense:\n      {\n        return {\n          nodeType: 'function',\n          type: _reactIs.Suspense,\n          props: (0, _object2['default'])({}, node.memoizedProps),\n          key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(node.key),\n          ref: node.ref,\n          instance: null,\n          rendered: childrenToTree(node.child)\n        };\n      }\n\n    case FiberTags.Lazy:\n      return childrenToTree(node.child);\n\n    default:\n      throw new Error('Enzyme Internal Error: unknown node with tag ' + String(node.tag));\n  }\n}\n\nfunction childrenToTree(node) {\n  if (!node) {\n    return null;\n  }\n\n  var children = nodeAndSiblingsArray(node);\n\n  if (children.length === 0) {\n    return null;\n  }\n\n  if (children.length === 1) {\n    return _toTree(children[0]);\n  }\n\n  return flatten(children.map(_toTree));\n}\n\nfunction _nodeToHostNode(_node) {\n  // NOTE(lmr): node could be a function component\n  // which wont have an instance prop, but we can get the\n  // host node associated with its return value at that point.\n  // Although this breaks down if the return value is an array,\n  // as is possible with React 16.\n  var node = _node;\n\n  while (node && !Array.isArray(node) && node.instance === null) {\n    node = node.rendered;\n  } // if the SFC returned null effectively, there is no host node.\n\n\n  if (!node) {\n    return null;\n  }\n\n  var mapper = function mapper(item) {\n    if (item && item.instance) return _reactDom2['default'].findDOMNode(item.instance);\n    return null;\n  };\n\n  if (Array.isArray(node)) {\n    return node.map(mapper);\n  }\n\n  if (Array.isArray(node.rendered) && node.nodeType === 'class') {\n    return node.rendered.map(mapper);\n  }\n\n  return mapper(node);\n}\n\nfunction replaceLazyWithFallback(node, fallback) {\n  if (!node) {\n    return null;\n  }\n\n  if (Array.isArray(node)) {\n    return node.map(function (el) {\n      return replaceLazyWithFallback(el, fallback);\n    });\n  }\n\n  if ((0, _reactIs.isLazy)(node.type)) {\n    return fallback;\n  }\n\n  return (0, _object2['default'])({}, node, {\n    props: (0, _object2['default'])({}, node.props, {\n      children: replaceLazyWithFallback(node.props.children, fallback)\n    })\n  });\n}\n\nvar eventOptions = {\n  animation: true,\n  pointerEvents: is164,\n  auxClick: is165\n};\n\nfunction getEmptyStateValue() {\n  // this handles a bug in React 16.0 - 16.2\n  // see https://github.com/facebook/react/commit/39be83565c65f9c522150e52375167568a2a1459\n  // also see https://github.com/facebook/react/pull/11965\n  // eslint-disable-next-line react/prefer-stateless-function\n  var EmptyState = function (_React$Component) {\n    _inherits(EmptyState, _React$Component);\n\n    function EmptyState() {\n      _classCallCheck(this, EmptyState);\n\n      return _possibleConstructorReturn(this, (EmptyState.__proto__ || Object.getPrototypeOf(EmptyState)).apply(this, arguments));\n    }\n\n    _createClass(EmptyState, [{\n      key: 'render',\n      value: function () {\n        function render() {\n          return null;\n        }\n\n        return render;\n      }()\n    }]);\n\n    return EmptyState;\n  }(_react2['default'].Component);\n\n  var testRenderer = new _shallow2['default']();\n  testRenderer.render(_react2['default'].createElement(EmptyState));\n  return testRenderer._instance.state;\n}\n\nfunction wrapAct(fn) {\n  if (!is168) {\n    return fn();\n  }\n\n  var returnVal = void 0;\n\n  _testUtils2['default'].act(function () {\n    returnVal = fn();\n  });\n\n  return returnVal;\n}\n\nfunction getProviderDefaultValue(Provider) {\n  // React stores references to the Provider's defaultValue differently across versions.\n  if ('_defaultValue' in Provider._context) {\n    return Provider._context._defaultValue;\n  }\n\n  if ('_currentValue' in Provider._context) {\n    return Provider._context._currentValue;\n  }\n\n  throw new Error('Enzyme Internal Error: can’t figure out how to get Provider’s default value');\n}\n\nfunction makeFakeElement(type) {\n  return {\n    $$typeof: _reactIs.Element,\n    type: type\n  };\n}\n\nfunction isStateful(Component) {\n  return Component.prototype && (Component.prototype.isReactComponent || Array.isArray(Component.__reactAutoBindPairs) // fallback for createClass components\n  );\n}\n\nvar ReactSixteenAdapter = function (_EnzymeAdapter) {\n  _inherits(ReactSixteenAdapter, _EnzymeAdapter);\n\n  function ReactSixteenAdapter() {\n    _classCallCheck(this, ReactSixteenAdapter);\n\n    var _this2 = _possibleConstructorReturn(this, (ReactSixteenAdapter.__proto__ || Object.getPrototypeOf(ReactSixteenAdapter)).call(this));\n\n    var lifecycles = _this2.options.lifecycles;\n    _this2.options = (0, _object2['default'])({}, _this2.options, {\n      enableComponentDidUpdateOnSetState: true,\n      // TODO: remove, semver-major\n      legacyContextMode: 'parent',\n      lifecycles: (0, _object2['default'])({}, lifecycles, {\n        componentDidUpdate: {\n          onSetState: true\n        },\n        getDerivedStateFromProps: {\n          hasShouldComponentUpdateBug: hasShouldComponentUpdateBug\n        },\n        getSnapshotBeforeUpdate: true,\n        setState: {\n          skipsComponentDidUpdateOnNullish: true\n        },\n        getChildContext: {\n          calledByRenderer: false\n        },\n        getDerivedStateFromError: is166\n      })\n    });\n    return _this2;\n  }\n\n  _createClass(ReactSixteenAdapter, [{\n    key: 'createMountRenderer',\n    value: function () {\n      function createMountRenderer(options) {\n        (0, _enzymeAdapterUtils.assertDomAvailable)('mount');\n\n        if ((0, _has2['default'])(options, 'suspenseFallback')) {\n          throw new TypeError('`suspenseFallback` is not supported by the `mount` renderer');\n        }\n\n        if (FiberTags === null) {\n          // Requires DOM.\n          FiberTags = (0, _detectFiberTags2['default'])();\n        }\n\n        var attachTo = options.attachTo,\n            hydrateIn = options.hydrateIn,\n            wrappingComponentProps = options.wrappingComponentProps;\n        var domNode = hydrateIn || attachTo || global.document.createElement('div');\n        var instance = null;\n        var adapter = this;\n        return (0, _object2['default'])({\n          render: function () {\n            function render(el, context, callback) {\n              return wrapAct(function () {\n                if (instance === null) {\n                  var type = el.type,\n                      props = el.props,\n                      ref = el.ref;\n                  var wrapperProps = (0, _object2['default'])({\n                    Component: type,\n                    props: props,\n                    wrappingComponentProps: wrappingComponentProps,\n                    context: context\n                  }, ref && {\n                    refProp: ref\n                  });\n                  var ReactWrapperComponent = (0, _enzymeAdapterUtils.createMountWrapper)(el, (0, _object2['default'])({}, options, {\n                    adapter: adapter\n                  }));\n\n                  var wrappedEl = _react2['default'].createElement(ReactWrapperComponent, wrapperProps);\n\n                  instance = hydrateIn ? _reactDom2['default'].hydrate(wrappedEl, domNode) : _reactDom2['default'].render(wrappedEl, domNode);\n\n                  if (typeof callback === 'function') {\n                    callback();\n                  }\n                } else {\n                  instance.setChildProps(el.props, context, callback);\n                }\n              });\n            }\n\n            return render;\n          }(),\n          unmount: function () {\n            function unmount() {\n              _reactDom2['default'].unmountComponentAtNode(domNode);\n\n              instance = null;\n            }\n\n            return unmount;\n          }(),\n          getNode: function () {\n            function getNode() {\n              if (!instance) {\n                return null;\n              }\n\n              return (0, _enzymeAdapterUtils.getNodeFromRootFinder)(adapter.isCustomComponent, _toTree(instance._reactInternalFiber), options);\n            }\n\n            return getNode;\n          }(),\n          simulateError: function () {\n            function simulateError(nodeHierarchy, rootNode, error) {\n              var isErrorBoundary = function () {\n                function isErrorBoundary(_ref) {\n                  var elInstance = _ref.instance,\n                      type = _ref.type;\n\n                  if (is166 && type && type.getDerivedStateFromError) {\n                    return true;\n                  }\n\n                  return elInstance && elInstance.componentDidCatch;\n                }\n\n                return isErrorBoundary;\n              }();\n\n              var _ref2 = nodeHierarchy.find(isErrorBoundary) || {},\n                  catchingInstance = _ref2.instance,\n                  catchingType = _ref2.type;\n\n              (0, _enzymeAdapterUtils.simulateError)(error, catchingInstance, rootNode, nodeHierarchy, nodeTypeFromType, adapter.displayNameOfNode, is166 ? catchingType : undefined);\n            }\n\n            return simulateError;\n          }(),\n          simulateEvent: function () {\n            function simulateEvent(node, event, mock) {\n              var mappedEvent = (0, _enzymeAdapterUtils.mapNativeEventNames)(event, eventOptions);\n              var eventFn = _testUtils2['default'].Simulate[mappedEvent];\n\n              if (!eventFn) {\n                throw new TypeError('ReactWrapper::simulate() event \\'' + String(event) + '\\' does not exist');\n              }\n\n              wrapAct(function () {\n                eventFn(adapter.nodeToHostNode(node), mock);\n              });\n            }\n\n            return simulateEvent;\n          }(),\n          batchedUpdates: function () {\n            function batchedUpdates(fn) {\n              return fn(); // return ReactDOM.unstable_batchedUpdates(fn);\n            }\n\n            return batchedUpdates;\n          }(),\n          getWrappingComponentRenderer: function () {\n            function getWrappingComponentRenderer() {\n              return (0, _object2['default'])({}, this, (0, _enzymeAdapterUtils.getWrappingComponentMountRenderer)({\n                toTree: function () {\n                  function toTree(inst) {\n                    return _toTree(inst._reactInternalFiber);\n                  }\n\n                  return toTree;\n                }(),\n                getMountWrapperInstance: function () {\n                  function getMountWrapperInstance() {\n                    return instance;\n                  }\n\n                  return getMountWrapperInstance;\n                }()\n              }));\n            }\n\n            return getWrappingComponentRenderer;\n          }()\n        }, is168 && {\n          wrapInvoke: wrapAct\n        });\n      }\n\n      return createMountRenderer;\n    }()\n  }, {\n    key: 'createShallowRenderer',\n    value: function () {\n      function createShallowRenderer() {\n        var _this4 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var adapter = this;\n        var renderer = new _shallow2['default']();\n        var suspenseFallback = options.suspenseFallback;\n\n        if (typeof suspenseFallback !== 'undefined' && typeof suspenseFallback !== 'boolean') {\n          throw TypeError('`options.suspenseFallback` should be boolean or undefined');\n        }\n\n        var isDOM = false;\n        var cachedNode = null;\n        var lastComponent = null;\n        var wrappedComponent = null;\n        var sentinel = {}; // wrap memo components with a PureComponent, or a class component with sCU\n\n        var wrapPureComponent = function () {\n          function wrapPureComponent(Component, compare) {\n            if (!is166) {\n              throw new RangeError('this function should not be called in React < 16.6. Please report this!');\n            }\n\n            if (lastComponent !== Component) {\n              if (isStateful(Component)) {\n                wrappedComponent = function (_Component) {\n                  _inherits(wrappedComponent, _Component);\n\n                  function wrappedComponent() {\n                    _classCallCheck(this, wrappedComponent);\n\n                    return _possibleConstructorReturn(this, (wrappedComponent.__proto__ || Object.getPrototypeOf(wrappedComponent)).apply(this, arguments));\n                  }\n\n                  return wrappedComponent;\n                }(Component); // eslint-disable-line react/prefer-stateless-function\n\n\n                if (compare) {\n                  wrappedComponent.prototype.shouldComponentUpdate = function (nextProps) {\n                    return !compare(_this4.props, nextProps);\n                  };\n                } else {\n                  wrappedComponent.prototype.isPureReactComponent = true;\n                }\n              } else {\n                var memoized = sentinel;\n                var prevProps = void 0;\n\n                wrappedComponent = function () {\n                  function wrappedComponent(props) {\n                    var shouldUpdate = memoized === sentinel || (compare ? !compare(prevProps, props) : !(0, _enzymeShallowEqual2['default'])(prevProps, props));\n\n                    if (shouldUpdate) {\n                      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                        args[_key - 1] = arguments[_key];\n                      }\n\n                      memoized = Component.apply(undefined, [(0, _object2['default'])({}, Component.defaultProps, props)].concat(args));\n                      prevProps = props;\n                    }\n\n                    return memoized;\n                  }\n\n                  return wrappedComponent;\n                }();\n              }\n\n              (0, _object2['default'])(wrappedComponent, Component, {\n                displayName: adapter.displayNameOfNode({\n                  type: Component\n                })\n              });\n              lastComponent = Component;\n            }\n\n            return wrappedComponent;\n          }\n\n          return wrapPureComponent;\n        }(); // Wrap functional components on versions prior to 16.5,\n        // to avoid inadvertently pass a `this` instance to it.\n\n\n        var wrapFunctionalComponent = function () {\n          function wrapFunctionalComponent(Component) {\n            if (is166 && (0, _has2['default'])(Component, 'defaultProps')) {\n              if (lastComponent !== Component) {\n                wrappedComponent = (0, _object2['default'])( // eslint-disable-next-line new-cap\n                function (props) {\n                  for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                    args[_key2 - 1] = arguments[_key2];\n                  }\n\n                  return Component.apply(undefined, [(0, _object2['default'])({}, Component.defaultProps, props)].concat(args));\n                }, Component, {\n                  displayName: adapter.displayNameOfNode({\n                    type: Component\n                  })\n                });\n                lastComponent = Component;\n              }\n\n              return wrappedComponent;\n            }\n\n            if (is165) {\n              return Component;\n            }\n\n            if (lastComponent !== Component) {\n              wrappedComponent = (0, _object2['default'])(function () {\n                return Component.apply(undefined, arguments);\n              }, // eslint-disable-line new-cap\n              Component);\n              lastComponent = Component;\n            }\n\n            return wrappedComponent;\n          }\n\n          return wrapFunctionalComponent;\n        }();\n\n        return {\n          render: function () {\n            function render(el, unmaskedContext) {\n              var _ref3 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                  _ref3$providerValues = _ref3.providerValues,\n                  providerValues = _ref3$providerValues === undefined ? new Map() : _ref3$providerValues;\n\n              cachedNode = el;\n              /* eslint consistent-return: 0 */\n\n              if (typeof el.type === 'string') {\n                isDOM = true;\n              } else if ((0, _reactIs.isContextProvider)(el)) {\n                providerValues.set(el.type, el.props.value);\n                var MockProvider = (0, _object2['default'])(function (props) {\n                  return props.children;\n                }, el.type);\n                return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {\n                  return renderer.render((0, _object2['default'])({}, el, {\n                    type: MockProvider\n                  }));\n                });\n              } else if ((0, _reactIs.isContextConsumer)(el)) {\n                var Provider = adapter.getProviderFromConsumer(el.type);\n                var value = providerValues.has(Provider) ? providerValues.get(Provider) : getProviderDefaultValue(Provider);\n                var MockConsumer = (0, _object2['default'])(function (props) {\n                  return props.children(value);\n                }, el.type);\n                return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {\n                  return renderer.render((0, _object2['default'])({}, el, {\n                    type: MockConsumer\n                  }));\n                });\n              } else {\n                isDOM = false;\n                var renderedEl = el;\n\n                if ((0, _reactIs.isLazy)(renderedEl)) {\n                  throw TypeError('`React.lazy` is not supported by shallow rendering.');\n                }\n\n                if ((0, _reactIs.isSuspense)(renderedEl)) {\n                  var children = renderedEl.props.children;\n\n                  if (suspenseFallback) {\n                    var fallback = renderedEl.props.fallback;\n                    children = replaceLazyWithFallback(children, fallback);\n                  }\n\n                  var FakeSuspenseWrapper = function () {\n                    function FakeSuspenseWrapper() {\n                      return children;\n                    }\n\n                    return FakeSuspenseWrapper;\n                  }();\n\n                  renderedEl = _react2['default'].createElement(FakeSuspenseWrapper, null, children);\n                }\n\n                var _renderedEl = renderedEl,\n                    Component = _renderedEl.type;\n                var context = (0, _enzymeAdapterUtils.getMaskedContext)(Component.contextTypes, unmaskedContext);\n\n                if ((0, _reactIs.isMemo)(el.type)) {\n                  var _el$type = el.type,\n                      InnerComp = _el$type.type,\n                      compare = _el$type.compare;\n                  return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {\n                    return renderer.render((0, _object2['default'])({}, el, {\n                      type: wrapPureComponent(InnerComp, compare)\n                    }), context);\n                  });\n                }\n\n                if (!isStateful(Component) && typeof Component === 'function') {\n                  return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {\n                    return renderer.render((0, _object2['default'])({}, renderedEl, {\n                      type: wrapFunctionalComponent(Component)\n                    }), context);\n                  });\n                }\n\n                if (isStateful) {\n                  // fix react bug; see implementation of `getEmptyStateValue`\n                  var emptyStateValue = getEmptyStateValue();\n\n                  if (emptyStateValue) {\n                    Object.defineProperty(Component.prototype, 'state', {\n                      configurable: true,\n                      enumerable: true,\n                      get: function () {\n                        function get() {\n                          return null;\n                        }\n\n                        return get;\n                      }(),\n                      set: function () {\n                        function set(value) {\n                          if (value !== emptyStateValue) {\n                            Object.defineProperty(this, 'state', {\n                              configurable: true,\n                              enumerable: true,\n                              value: value,\n                              writable: true\n                            });\n                          }\n\n                          return true;\n                        }\n\n                        return set;\n                      }()\n                    });\n                  }\n                }\n\n                return (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {\n                  return renderer.render(renderedEl, context);\n                });\n              }\n            }\n\n            return render;\n          }(),\n          unmount: function () {\n            function unmount() {\n              renderer.unmount();\n            }\n\n            return unmount;\n          }(),\n          getNode: function () {\n            function getNode() {\n              if (isDOM) {\n                return elementToTree(cachedNode);\n              }\n\n              var output = renderer.getRenderOutput();\n              return {\n                nodeType: nodeTypeFromType(cachedNode.type),\n                type: cachedNode.type,\n                props: cachedNode.props,\n                key: (0, _enzymeAdapterUtils.ensureKeyOrUndefined)(cachedNode.key),\n                ref: cachedNode.ref,\n                instance: renderer._instance,\n                rendered: Array.isArray(output) ? flatten(output).map(function (el) {\n                  return elementToTree(el);\n                }) : elementToTree(output)\n              };\n            }\n\n            return getNode;\n          }(),\n          simulateError: function () {\n            function simulateError(nodeHierarchy, rootNode, error) {\n              (0, _enzymeAdapterUtils.simulateError)(error, renderer._instance, cachedNode, nodeHierarchy.concat(cachedNode), nodeTypeFromType, adapter.displayNameOfNode, is166 ? cachedNode.type : undefined);\n            }\n\n            return simulateError;\n          }(),\n          simulateEvent: function () {\n            function simulateEvent(node, event) {\n              for (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n                args[_key3 - 2] = arguments[_key3];\n              }\n\n              var handler = node.props[(0, _enzymeAdapterUtils.propFromEvent)(event, eventOptions)];\n\n              if (handler) {\n                (0, _enzymeAdapterUtils.withSetStateAllowed)(function () {\n                  // TODO(lmr): create/use synthetic events\n                  // TODO(lmr): emulate React's event propagation\n                  // ReactDOM.unstable_batchedUpdates(() => {\n                  handler.apply(undefined, _toConsumableArray(args)); // });\n                });\n              }\n            }\n\n            return simulateEvent;\n          }(),\n          batchedUpdates: function () {\n            function batchedUpdates(fn) {\n              return fn(); // return ReactDOM.unstable_batchedUpdates(fn);\n            }\n\n            return batchedUpdates;\n          }(),\n          checkPropTypes: function () {\n            function checkPropTypes(typeSpecs, values, location, hierarchy) {\n              return (0, _checkPropTypes3['default'])(typeSpecs, values, location, (0, _enzymeAdapterUtils.displayNameOfNode)(cachedNode), function () {\n                return (0, _enzymeAdapterUtils.getComponentStack)(hierarchy.concat([cachedNode]));\n              });\n            }\n\n            return checkPropTypes;\n          }()\n        };\n      }\n\n      return createShallowRenderer;\n    }()\n  }, {\n    key: 'createStringRenderer',\n    value: function () {\n      function createStringRenderer(options) {\n        if ((0, _has2['default'])(options, 'suspenseFallback')) {\n          throw new TypeError('`suspenseFallback` should not be specified in options of string renderer');\n        }\n\n        return {\n          render: function () {\n            function render(el, context) {\n              if (options.context && (el.type.contextTypes || options.childContextTypes)) {\n                var childContextTypes = (0, _object2['default'])({}, el.type.contextTypes || {}, options.childContextTypes);\n                var ContextWrapper = (0, _enzymeAdapterUtils.createRenderWrapper)(el, context, childContextTypes);\n                return _server2['default'].renderToStaticMarkup(_react2['default'].createElement(ContextWrapper));\n              }\n\n              return _server2['default'].renderToStaticMarkup(el);\n            }\n\n            return render;\n          }()\n        };\n      }\n\n      return createStringRenderer;\n    }() // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\n    // specific, like `attach` etc. for React, but not part of this interface explicitly.\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'createRenderer',\n    value: function () {\n      function createRenderer(options) {\n        switch (options.mode) {\n          case _enzyme.EnzymeAdapter.MODES.MOUNT:\n            return this.createMountRenderer(options);\n\n          case _enzyme.EnzymeAdapter.MODES.SHALLOW:\n            return this.createShallowRenderer(options);\n\n          case _enzyme.EnzymeAdapter.MODES.STRING:\n            return this.createStringRenderer(options);\n\n          default:\n            throw new Error('Enzyme Internal Error: Unrecognized mode: ' + String(options.mode));\n        }\n      }\n\n      return createRenderer;\n    }()\n  }, {\n    key: 'wrap',\n    value: function () {\n      function wrap(element) {\n        return (0, _enzymeAdapterUtils.wrap)(element);\n      }\n\n      return wrap;\n    }() // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\n    // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\n    // be pretty straightforward for people to implement.\n    // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'nodeToElement',\n    value: function () {\n      function nodeToElement(node) {\n        if (!node || (typeof node === 'undefined' ? 'undefined' : _typeof(node)) !== 'object') return null;\n        var type = node.type;\n        return _react2['default'].createElement(unmemoType(type), (0, _enzymeAdapterUtils.propsWithKeysAndRef)(node));\n      }\n\n      return nodeToElement;\n    }() // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: 'matchesElementType',\n    value: function () {\n      function matchesElementType(node, matchingType) {\n        if (!node) {\n          return node;\n        }\n\n        var type = node.type;\n        return unmemoType(type) === unmemoType(matchingType);\n      }\n\n      return matchesElementType;\n    }()\n  }, {\n    key: 'elementToNode',\n    value: function () {\n      function elementToNode(element) {\n        return elementToTree(element);\n      }\n\n      return elementToNode;\n    }()\n  }, {\n    key: 'nodeToHostNode',\n    value: function () {\n      function nodeToHostNode(node) {\n        var supportsArray = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        var nodes = _nodeToHostNode(node);\n\n        if (Array.isArray(nodes) && !supportsArray) {\n          return nodes[0];\n        }\n\n        return nodes;\n      }\n\n      return nodeToHostNode;\n    }()\n  }, {\n    key: 'displayNameOfNode',\n    value: function () {\n      function displayNameOfNode(node) {\n        if (!node) return null;\n        var type = node.type,\n            $$typeof = node.$$typeof;\n        var nodeType = type || $$typeof; // newer node types may be undefined, so only test if the nodeType exists\n\n        if (nodeType) {\n          switch (nodeType) {\n            case (is166 ? _reactIs.ConcurrentMode : _reactIs.AsyncMode) || NaN:\n              return is166 ? 'ConcurrentMode' : 'AsyncMode';\n\n            case _reactIs.Fragment || NaN:\n              return 'Fragment';\n\n            case _reactIs.StrictMode || NaN:\n              return 'StrictMode';\n\n            case _reactIs.Profiler || NaN:\n              return 'Profiler';\n\n            case _reactIs.Portal || NaN:\n              return 'Portal';\n\n            case _reactIs.Suspense || NaN:\n              return 'Suspense';\n\n            default:\n          }\n        }\n\n        var $$typeofType = type && type.$$typeof;\n\n        switch ($$typeofType) {\n          case _reactIs.ContextConsumer || NaN:\n            return 'ContextConsumer';\n\n          case _reactIs.ContextProvider || NaN:\n            return 'ContextProvider';\n\n          case _reactIs.Memo || NaN:\n            {\n              var nodeName = (0, _enzymeAdapterUtils.displayNameOfNode)(node);\n              return typeof nodeName === 'string' ? nodeName : 'Memo(' + String((0, _enzymeAdapterUtils.displayNameOfNode)(type)) + ')';\n            }\n\n          case _reactIs.ForwardRef || NaN:\n            {\n              if (type.displayName) {\n                return type.displayName;\n              }\n\n              var name = (0, _enzymeAdapterUtils.displayNameOfNode)({\n                type: type.render\n              });\n              return name ? 'ForwardRef(' + String(name) + ')' : 'ForwardRef';\n            }\n\n          case _reactIs.Lazy || NaN:\n            {\n              return 'lazy';\n            }\n\n          default:\n            return (0, _enzymeAdapterUtils.displayNameOfNode)(node);\n        }\n      }\n\n      return displayNameOfNode;\n    }()\n  }, {\n    key: 'isValidElement',\n    value: function () {\n      function isValidElement(element) {\n        return (0, _reactIs.isElement)(element);\n      }\n\n      return isValidElement;\n    }()\n  }, {\n    key: 'isValidElementType',\n    value: function () {\n      function isValidElementType(object) {\n        return !!object && (0, _reactIs.isValidElementType)(object);\n      }\n\n      return isValidElementType;\n    }()\n  }, {\n    key: 'isFragment',\n    value: function () {\n      function isFragment(fragment) {\n        return (0, _Utils.typeOfNode)(fragment) === _reactIs.Fragment;\n      }\n\n      return isFragment;\n    }()\n  }, {\n    key: 'isCustomComponent',\n    value: function () {\n      function isCustomComponent(type) {\n        var fakeElement = makeFakeElement(type);\n        return !!type && (typeof type === 'function' || (0, _reactIs.isForwardRef)(fakeElement) || (0, _reactIs.isContextProvider)(fakeElement) || (0, _reactIs.isContextConsumer)(fakeElement) || (0, _reactIs.isSuspense)(fakeElement));\n      }\n\n      return isCustomComponent;\n    }()\n  }, {\n    key: 'isContextConsumer',\n    value: function () {\n      function isContextConsumer(type) {\n        return !!type && (0, _reactIs.isContextConsumer)(makeFakeElement(type));\n      }\n\n      return isContextConsumer;\n    }()\n  }, {\n    key: 'isCustomComponentElement',\n    value: function () {\n      function isCustomComponentElement(inst) {\n        if (!inst || !this.isValidElement(inst)) {\n          return false;\n        }\n\n        return this.isCustomComponent(inst.type);\n      }\n\n      return isCustomComponentElement;\n    }()\n  }, {\n    key: 'getProviderFromConsumer',\n    value: function () {\n      function getProviderFromConsumer(Consumer) {\n        // React stores references to the Provider on a Consumer differently across versions.\n        if (Consumer) {\n          var Provider = void 0;\n\n          if (Consumer._context) {\n            Provider = Consumer._context.Provider; // check this first, to avoid a deprecation warning\n          } else if (Consumer.Provider) {\n            Provider = Consumer.Provider;\n          }\n\n          if (Provider) {\n            return Provider;\n          }\n        }\n\n        throw new Error('Enzyme Internal Error: can’t figure out how to get Provider from Consumer');\n      }\n\n      return getProviderFromConsumer;\n    }()\n  }, {\n    key: 'createElement',\n    value: function () {\n      function createElement() {\n        return _react2['default'].createElement.apply(_react2['default'], arguments);\n      }\n\n      return createElement;\n    }()\n  }, {\n    key: 'wrapWithWrappingComponent',\n    value: function () {\n      function wrapWithWrappingComponent(node, options) {\n        return {\n          RootFinder: _enzymeAdapterUtils.RootFinder,\n          node: (0, _enzymeAdapterUtils.wrapWithWrappingComponent)(_react2['default'].createElement, node, options)\n        };\n      }\n\n      return wrapWithWrappingComponent;\n    }()\n  }]);\n\n  return ReactSixteenAdapter;\n}(_enzyme.EnzymeAdapter);\n\nmodule.exports = ReactSixteenAdapter; //# sourceMappingURL=ReactSixteenAdapter.js.map","map":{"version":3,"sources":["../src/ReactSixteenAdapter.js"],"names":["is164","TestUtils","is165","is166","React","is168","hasShouldComponentUpdateBug","semver","testRendererVersion","FiberTags","array","node","result","stack","i","n","el","Array","type","Portal","children","containerInfo","props","nodeType","key","ref","instance","rendered","elementToTree","vnode","childrenToTree","renderedNodes","flatten","nodeAndSiblingsArray","Suspense","toTree","mapper","item","ReactDOM","replaceLazyWithFallback","eventOptions","animation","pointerEvents","auxClick","EmptyState","testRenderer","ShallowRenderer","fn","returnVal","Provider","$$typeof","Element","Component","ReactSixteenAdapter","EnzymeAdapter","lifecycles","enableComponentDidUpdateOnSetState","legacyContextMode","componentDidUpdate","onSetState","getDerivedStateFromProps","getSnapshotBeforeUpdate","setState","skipsComponentDidUpdateOnNullish","getChildContext","calledByRenderer","getDerivedStateFromError","options","attachTo","hydrateIn","wrappingComponentProps","domNode","global","adapter","render","context","refProp","ReactWrapperComponent","wrappedEl","callback","unmount","getNode","simulateError","elInstance","catchingInstance","catchingType","nodeHierarchy","simulateEvent","mappedEvent","eventFn","wrapAct","batchedUpdates","getWrappingComponentRenderer","inst","getMountWrapperInstance","wrapInvoke","renderer","suspenseFallback","TypeError","isDOM","cachedNode","lastComponent","wrappedComponent","sentinel","isStateful","compare","memoized","prevProps","args","shouldUpdate","displayName","providerValues","MockProvider","value","getProviderDefaultValue","MockConsumer","renderedEl","fallback","InnerComp","wrapPureComponent","wrapFunctionalComponent","emptyStateValue","getEmptyStateValue","Object","configurable","enumerable","get","set","writable","output","nodeTypeFromType","handler","checkPropTypes","hierarchy","childContextTypes","ContextWrapper","ReactDOMServer","element","unmemoType","matchingType","supportsArray","nodes","nodeToHostNode","ConcurrentMode","AsyncMode","Fragment","StrictMode","Profiler","$$typeofType","ContextConsumer","ContextProvider","Memo","nodeName","ForwardRef","name","Lazy","object","fragment","fakeElement","makeFakeElement","Consumer","RootFinder","module"],"mappings":"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","sourcesContent":["/* eslint no-use-before-define: 0 */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-unresolved\nimport ReactDOMServer from 'react-dom/server';\n// eslint-disable-next-line import/no-unresolved\nimport ShallowRenderer from 'react-test-renderer/shallow';\nimport { version as testRendererVersion } from 'react-test-renderer/package.json';\n// eslint-disable-next-line import/no-unresolved\nimport TestUtils from 'react-dom/test-utils';\nimport semver from 'semver';\nimport checkPropTypes from 'prop-types/checkPropTypes';\nimport has from 'has';\nimport {\n  AsyncMode,\n  ConcurrentMode,\n  ContextConsumer,\n  ContextProvider,\n  Element,\n  ForwardRef,\n  Fragment,\n  isContextConsumer,\n  isContextProvider,\n  isElement,\n  isForwardRef,\n  isLazy,\n  isMemo,\n  isPortal,\n  isSuspense,\n  isValidElementType,\n  Lazy,\n  Memo,\n  Portal,\n  Profiler,\n  StrictMode,\n  Suspense,\n} from 'react-is';\nimport { EnzymeAdapter } from 'enzyme';\nimport { typeOfNode } from 'enzyme/build/Utils';\nimport shallowEqual from 'enzyme-shallow-equal';\nimport {\n  displayNameOfNode,\n  elementToTree as utilElementToTree,\n  nodeTypeFromType as utilNodeTypeFromType,\n  mapNativeEventNames,\n  propFromEvent,\n  assertDomAvailable,\n  withSetStateAllowed,\n  createRenderWrapper,\n  createMountWrapper,\n  propsWithKeysAndRef,\n  ensureKeyOrUndefined,\n  simulateError,\n  wrap,\n  getMaskedContext,\n  getComponentStack,\n  RootFinder,\n  getNodeFromRootFinder,\n  wrapWithWrappingComponent,\n  getWrappingComponentMountRenderer,\n} from 'enzyme-adapter-utils';\nimport findCurrentFiberUsingSlowPath from './findCurrentFiberUsingSlowPath';\nimport detectFiberTags from './detectFiberTags';\n\nconst is164 = !!TestUtils.Simulate.touchStart; // 16.4+\nconst is165 = !!TestUtils.Simulate.auxClick; // 16.5+\nconst is166 = is165 && !React.unstable_AsyncMode; // 16.6+\nconst is168 = is166 && typeof TestUtils.act === 'function';\n\nconst hasShouldComponentUpdateBug = semver.satisfies(testRendererVersion, '< 16.8');\n\n// Lazily populated if DOM is available.\nlet FiberTags = null;\n\nfunction nodeAndSiblingsArray(nodeWithSibling) {\n  const array = [];\n  let node = nodeWithSibling;\n  while (node != null) {\n    array.push(node);\n    node = node.sibling;\n  }\n  return array;\n}\n\nfunction flatten(arr) {\n  const result = [];\n  const stack = [{ i: 0, array: arr }];\n  while (stack.length) {\n    const n = stack.pop();\n    while (n.i < n.array.length) {\n      const el = n.array[n.i];\n      n.i += 1;\n      if (Array.isArray(el)) {\n        stack.push(n);\n        stack.push({ i: 0, array: el });\n        break;\n      }\n      result.push(el);\n    }\n  }\n  return result;\n}\n\nfunction nodeTypeFromType(type) {\n  if (type === Portal) {\n    return 'portal';\n  }\n\n  return utilNodeTypeFromType(type);\n}\n\nfunction unmemoType(type) {\n  return isMemo(type) ? type.type : type;\n}\n\nfunction elementToTree(el) {\n  if (!isPortal(el)) {\n    return utilElementToTree(el, elementToTree);\n  }\n\n  const { children, containerInfo } = el;\n  const props = { children, containerInfo };\n\n  return {\n    nodeType: 'portal',\n    type: Portal,\n    props,\n    key: ensureKeyOrUndefined(el.key),\n    ref: el.ref || null,\n    instance: null,\n    rendered: elementToTree(el.children),\n  };\n}\n\nfunction toTree(vnode) {\n  if (vnode == null) {\n    return null;\n  }\n  // TODO(lmr): I'm not really sure I understand whether or not this is what\n  // i should be doing, or if this is a hack for something i'm doing wrong\n  // somewhere else. Should talk to sebastian about this perhaps\n  const node = findCurrentFiberUsingSlowPath(vnode);\n  switch (node.tag) {\n    case FiberTags.HostRoot:\n      return childrenToTree(node.child);\n    case FiberTags.HostPortal: {\n      const {\n        stateNode: { containerInfo },\n        memoizedProps: children,\n      } = node;\n      const props = { containerInfo, children };\n      return {\n        nodeType: 'portal',\n        type: Portal,\n        props,\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.ClassComponent:\n      return {\n        nodeType: 'class',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.FunctionalComponent:\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.MemoClass:\n      return {\n        nodeType: 'class',\n        type: node.elementType.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child.child),\n      };\n    case FiberTags.MemoSFC: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'function',\n        type: node.elementType,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostComponent: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'host',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostText:\n      return node.memoizedProps;\n    case FiberTags.Fragment:\n    case FiberTags.Mode:\n    case FiberTags.ContextProvider:\n    case FiberTags.ContextConsumer:\n      return childrenToTree(node.child);\n    case FiberTags.Profiler:\n    case FiberTags.ForwardRef: {\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.pendingProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Suspense: {\n      return {\n        nodeType: 'function',\n        type: Suspense,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Lazy:\n      return childrenToTree(node.child);\n    default:\n      throw new Error(`Enzyme Internal Error: unknown node with tag ${node.tag}`);\n  }\n}\n\nfunction childrenToTree(node) {\n  if (!node) {\n    return null;\n  }\n  const children = nodeAndSiblingsArray(node);\n  if (children.length === 0) {\n    return null;\n  }\n  if (children.length === 1) {\n    return toTree(children[0]);\n  }\n  return flatten(children.map(toTree));\n}\n\nfunction nodeToHostNode(_node) {\n  // NOTE(lmr): node could be a function component\n  // which wont have an instance prop, but we can get the\n  // host node associated with its return value at that point.\n  // Although this breaks down if the return value is an array,\n  // as is possible with React 16.\n  let node = _node;\n  while (node && !Array.isArray(node) && node.instance === null) {\n    node = node.rendered;\n  }\n  // if the SFC returned null effectively, there is no host node.\n  if (!node) {\n    return null;\n  }\n\n  const mapper = (item) => {\n    if (item && item.instance) return ReactDOM.findDOMNode(item.instance);\n    return null;\n  };\n  if (Array.isArray(node)) {\n    return node.map(mapper);\n  }\n  if (Array.isArray(node.rendered) && node.nodeType === 'class') {\n    return node.rendered.map(mapper);\n  }\n  return mapper(node);\n}\n\nfunction replaceLazyWithFallback(node, fallback) {\n  if (!node) {\n    return null;\n  }\n  if (Array.isArray(node)) {\n    return node.map((el) => replaceLazyWithFallback(el, fallback));\n  }\n  if (isLazy(node.type)) {\n    return fallback;\n  }\n  return {\n    ...node,\n    props: {\n      ...node.props,\n      children: replaceLazyWithFallback(node.props.children, fallback),\n    },\n  };\n}\n\nconst eventOptions = {\n  animation: true,\n  pointerEvents: is164,\n  auxClick: is165,\n};\n\nfunction getEmptyStateValue() {\n  // this handles a bug in React 16.0 - 16.2\n  // see https://github.com/facebook/react/commit/39be83565c65f9c522150e52375167568a2a1459\n  // also see https://github.com/facebook/react/pull/11965\n\n  // eslint-disable-next-line react/prefer-stateless-function\n  class EmptyState extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  const testRenderer = new ShallowRenderer();\n  testRenderer.render(React.createElement(EmptyState));\n  return testRenderer._instance.state;\n}\n\nfunction wrapAct(fn) {\n  if (!is168) {\n    return fn();\n  }\n  let returnVal;\n  TestUtils.act(() => { returnVal = fn(); });\n  return returnVal;\n}\n\nfunction getProviderDefaultValue(Provider) {\n  // React stores references to the Provider's defaultValue differently across versions.\n  if ('_defaultValue' in Provider._context) {\n    return Provider._context._defaultValue;\n  }\n  if ('_currentValue' in Provider._context) {\n    return Provider._context._currentValue;\n  }\n  throw new Error('Enzyme Internal Error: can’t figure out how to get Provider’s default value');\n}\n\nfunction makeFakeElement(type) {\n  return { $$typeof: Element, type };\n}\n\nfunction isStateful(Component) {\n  return Component.prototype && (\n    Component.prototype.isReactComponent\n    || Array.isArray(Component.__reactAutoBindPairs) // fallback for createClass components\n  );\n}\n\nclass ReactSixteenAdapter extends EnzymeAdapter {\n  constructor() {\n    super();\n    const { lifecycles } = this.options;\n    this.options = {\n      ...this.options,\n      enableComponentDidUpdateOnSetState: true, // TODO: remove, semver-major\n      legacyContextMode: 'parent',\n      lifecycles: {\n        ...lifecycles,\n        componentDidUpdate: {\n          onSetState: true,\n        },\n        getDerivedStateFromProps: {\n          hasShouldComponentUpdateBug,\n        },\n        getSnapshotBeforeUpdate: true,\n        setState: {\n          skipsComponentDidUpdateOnNullish: true,\n        },\n        getChildContext: {\n          calledByRenderer: false,\n        },\n        getDerivedStateFromError: is166,\n      },\n    };\n  }\n\n  createMountRenderer(options) {\n    assertDomAvailable('mount');\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError('`suspenseFallback` is not supported by the `mount` renderer');\n    }\n    if (FiberTags === null) {\n      // Requires DOM.\n      FiberTags = detectFiberTags();\n    }\n    const { attachTo, hydrateIn, wrappingComponentProps } = options;\n    const domNode = hydrateIn || attachTo || global.document.createElement('div');\n    let instance = null;\n    const adapter = this;\n    return {\n      render(el, context, callback) {\n        return wrapAct(() => {\n          if (instance === null) {\n            const { type, props, ref } = el;\n            const wrapperProps = {\n              Component: type,\n              props,\n              wrappingComponentProps,\n              context,\n              ...(ref && { refProp: ref }),\n            };\n            const ReactWrapperComponent = createMountWrapper(el, { ...options, adapter });\n            const wrappedEl = React.createElement(ReactWrapperComponent, wrapperProps);\n            instance = hydrateIn\n              ? ReactDOM.hydrate(wrappedEl, domNode)\n              : ReactDOM.render(wrappedEl, domNode);\n            if (typeof callback === 'function') {\n              callback();\n            }\n          } else {\n            instance.setChildProps(el.props, context, callback);\n          }\n        });\n      },\n      unmount() {\n        ReactDOM.unmountComponentAtNode(domNode);\n        instance = null;\n      },\n      getNode() {\n        if (!instance) {\n          return null;\n        }\n        return getNodeFromRootFinder(\n          adapter.isCustomComponent,\n          toTree(instance._reactInternalFiber),\n          options,\n        );\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        const isErrorBoundary = ({ instance: elInstance, type }) => {\n          if (is166 && type && type.getDerivedStateFromError) {\n            return true;\n          }\n          return elInstance && elInstance.componentDidCatch;\n        };\n\n        const {\n          instance: catchingInstance,\n          type: catchingType,\n        } = nodeHierarchy.find(isErrorBoundary) || {};\n\n        simulateError(\n          error,\n          catchingInstance,\n          rootNode,\n          nodeHierarchy,\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n          is166 ? catchingType : undefined,\n        );\n      },\n      simulateEvent(node, event, mock) {\n        const mappedEvent = mapNativeEventNames(event, eventOptions);\n        const eventFn = TestUtils.Simulate[mappedEvent];\n        if (!eventFn) {\n          throw new TypeError(`ReactWrapper::simulate() event '${event}' does not exist`);\n        }\n        wrapAct(() => {\n          eventFn(adapter.nodeToHostNode(node), mock);\n        });\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      getWrappingComponentRenderer() {\n        return {\n          ...this,\n          ...getWrappingComponentMountRenderer({\n            toTree: (inst) => toTree(inst._reactInternalFiber),\n            getMountWrapperInstance: () => instance,\n          }),\n        };\n      },\n      ...(is168 && { wrapInvoke: wrapAct }),\n    };\n  }\n\n  createShallowRenderer(options = {}) {\n    const adapter = this;\n    const renderer = new ShallowRenderer();\n    const { suspenseFallback } = options;\n    if (typeof suspenseFallback !== 'undefined' && typeof suspenseFallback !== 'boolean') {\n      throw TypeError('`options.suspenseFallback` should be boolean or undefined');\n    }\n    let isDOM = false;\n    let cachedNode = null;\n\n    let lastComponent = null;\n    let wrappedComponent = null;\n    const sentinel = {};\n\n    // wrap memo components with a PureComponent, or a class component with sCU\n    const wrapPureComponent = (Component, compare) => {\n      if (!is166) {\n        throw new RangeError('this function should not be called in React < 16.6. Please report this!');\n      }\n      if (lastComponent !== Component) {\n        if (isStateful(Component)) {\n          wrappedComponent = class extends Component {}; // eslint-disable-line react/prefer-stateless-function\n          if (compare) {\n            wrappedComponent.prototype.shouldComponentUpdate = (nextProps) => !compare(this.props, nextProps);\n          } else {\n            wrappedComponent.prototype.isPureReactComponent = true;\n          }\n        } else {\n          let memoized = sentinel;\n          let prevProps;\n          wrappedComponent = function (props, ...args) {\n            const shouldUpdate = memoized === sentinel || (compare\n              ? !compare(prevProps, props)\n              : !shallowEqual(prevProps, props)\n            );\n            if (shouldUpdate) {\n              memoized = Component({ ...Component.defaultProps, ...props }, ...args);\n              prevProps = props;\n            }\n            return memoized;\n          };\n        }\n        Object.assign(\n          wrappedComponent,\n          Component,\n          { displayName: adapter.displayNameOfNode({ type: Component }) },\n        );\n        lastComponent = Component;\n      }\n      return wrappedComponent;\n    };\n\n    // Wrap functional components on versions prior to 16.5,\n    // to avoid inadvertently pass a `this` instance to it.\n    const wrapFunctionalComponent = (Component) => {\n      if (is166 && has(Component, 'defaultProps')) {\n        if (lastComponent !== Component) {\n          wrappedComponent = Object.assign(\n            // eslint-disable-next-line new-cap\n            (props, ...args) => Component({ ...Component.defaultProps, ...props }, ...args),\n            Component,\n            { displayName: adapter.displayNameOfNode({ type: Component }) },\n          );\n          lastComponent = Component;\n        }\n        return wrappedComponent;\n      }\n      if (is165) {\n        return Component;\n      }\n\n      if (lastComponent !== Component) {\n        wrappedComponent = Object.assign(\n          (...args) => Component(...args), // eslint-disable-line new-cap\n          Component,\n        );\n        lastComponent = Component;\n      }\n      return wrappedComponent;\n    };\n\n    return {\n      render(el, unmaskedContext, {\n        providerValues = new Map(),\n      } = {}) {\n        cachedNode = el;\n        /* eslint consistent-return: 0 */\n        if (typeof el.type === 'string') {\n          isDOM = true;\n        } else if (isContextProvider(el)) {\n          providerValues.set(el.type, el.props.value);\n          const MockProvider = Object.assign(\n            (props) => props.children,\n            el.type,\n          );\n          return withSetStateAllowed(() => renderer.render({ ...el, type: MockProvider }));\n        } else if (isContextConsumer(el)) {\n          const Provider = adapter.getProviderFromConsumer(el.type);\n          const value = providerValues.has(Provider)\n            ? providerValues.get(Provider)\n            : getProviderDefaultValue(Provider);\n          const MockConsumer = Object.assign(\n            (props) => props.children(value),\n            el.type,\n          );\n          return withSetStateAllowed(() => renderer.render({ ...el, type: MockConsumer }));\n        } else {\n          isDOM = false;\n          let renderedEl = el;\n          if (isLazy(renderedEl)) {\n            throw TypeError('`React.lazy` is not supported by shallow rendering.');\n          }\n          if (isSuspense(renderedEl)) {\n            let { children } = renderedEl.props;\n            if (suspenseFallback) {\n              const { fallback } = renderedEl.props;\n              children = replaceLazyWithFallback(children, fallback);\n            }\n            const FakeSuspenseWrapper = () => children;\n            renderedEl = React.createElement(FakeSuspenseWrapper, null, children);\n          }\n          const { type: Component } = renderedEl;\n\n          const context = getMaskedContext(Component.contextTypes, unmaskedContext);\n\n          if (isMemo(el.type)) {\n            const { type: InnerComp, compare } = el.type;\n\n            return withSetStateAllowed(() => renderer.render(\n              { ...el, type: wrapPureComponent(InnerComp, compare) },\n              context,\n            ));\n          }\n\n          if (!isStateful(Component) && typeof Component === 'function') {\n            return withSetStateAllowed(() => renderer.render(\n              { ...renderedEl, type: wrapFunctionalComponent(Component) },\n              context,\n            ));\n          }\n\n          if (isStateful) {\n            // fix react bug; see implementation of `getEmptyStateValue`\n            const emptyStateValue = getEmptyStateValue();\n            if (emptyStateValue) {\n              Object.defineProperty(Component.prototype, 'state', {\n                configurable: true,\n                enumerable: true,\n                get() {\n                  return null;\n                },\n                set(value) {\n                  if (value !== emptyStateValue) {\n                    Object.defineProperty(this, 'state', {\n                      configurable: true,\n                      enumerable: true,\n                      value,\n                      writable: true,\n                    });\n                  }\n                  return true;\n                },\n              });\n            }\n          }\n          return withSetStateAllowed(() => renderer.render(renderedEl, context));\n        }\n      },\n      unmount() {\n        renderer.unmount();\n      },\n      getNode() {\n        if (isDOM) {\n          return elementToTree(cachedNode);\n        }\n        const output = renderer.getRenderOutput();\n        return {\n          nodeType: nodeTypeFromType(cachedNode.type),\n          type: cachedNode.type,\n          props: cachedNode.props,\n          key: ensureKeyOrUndefined(cachedNode.key),\n          ref: cachedNode.ref,\n          instance: renderer._instance,\n          rendered: Array.isArray(output)\n            ? flatten(output).map((el) => elementToTree(el))\n            : elementToTree(output),\n        };\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        simulateError(\n          error,\n          renderer._instance,\n          cachedNode,\n          nodeHierarchy.concat(cachedNode),\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n          is166 ? cachedNode.type : undefined,\n        );\n      },\n      simulateEvent(node, event, ...args) {\n        const handler = node.props[propFromEvent(event, eventOptions)];\n        if (handler) {\n          withSetStateAllowed(() => {\n            // TODO(lmr): create/use synthetic events\n            // TODO(lmr): emulate React's event propagation\n            // ReactDOM.unstable_batchedUpdates(() => {\n            handler(...args);\n            // });\n          });\n        }\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      checkPropTypes(typeSpecs, values, location, hierarchy) {\n        return checkPropTypes(\n          typeSpecs,\n          values,\n          location,\n          displayNameOfNode(cachedNode),\n          () => getComponentStack(hierarchy.concat([cachedNode])),\n        );\n      },\n    };\n  }\n\n  createStringRenderer(options) {\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError('`suspenseFallback` should not be specified in options of string renderer');\n    }\n    return {\n      render(el, context) {\n        if (options.context && (el.type.contextTypes || options.childContextTypes)) {\n          const childContextTypes = {\n            ...(el.type.contextTypes || {}),\n            ...options.childContextTypes,\n          };\n          const ContextWrapper = createRenderWrapper(el, context, childContextTypes);\n          return ReactDOMServer.renderToStaticMarkup(React.createElement(ContextWrapper));\n        }\n        return ReactDOMServer.renderToStaticMarkup(el);\n      },\n    };\n  }\n\n  // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\n  // specific, like `attach` etc. for React, but not part of this interface explicitly.\n  // eslint-disable-next-line class-methods-use-this\n  createRenderer(options) {\n    switch (options.mode) {\n      case EnzymeAdapter.MODES.MOUNT: return this.createMountRenderer(options);\n      case EnzymeAdapter.MODES.SHALLOW: return this.createShallowRenderer(options);\n      case EnzymeAdapter.MODES.STRING: return this.createStringRenderer(options);\n      default:\n        throw new Error(`Enzyme Internal Error: Unrecognized mode: ${options.mode}`);\n    }\n  }\n\n  wrap(element) {\n    return wrap(element);\n  }\n\n  // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\n  // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\n  // be pretty straightforward for people to implement.\n  // eslint-disable-next-line class-methods-use-this\n  nodeToElement(node) {\n    if (!node || typeof node !== 'object') return null;\n    const { type } = node;\n    return React.createElement(unmemoType(type), propsWithKeysAndRef(node));\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  matchesElementType(node, matchingType) {\n    if (!node) {\n      return node;\n    }\n    const { type } = node;\n    return unmemoType(type) === unmemoType(matchingType);\n  }\n\n  elementToNode(element) {\n    return elementToTree(element);\n  }\n\n  nodeToHostNode(node, supportsArray = false) {\n    const nodes = nodeToHostNode(node);\n    if (Array.isArray(nodes) && !supportsArray) {\n      return nodes[0];\n    }\n    return nodes;\n  }\n\n  displayNameOfNode(node) {\n    if (!node) return null;\n    const { type, $$typeof } = node;\n\n    const nodeType = type || $$typeof;\n\n    // newer node types may be undefined, so only test if the nodeType exists\n    if (nodeType) {\n      switch (nodeType) {\n        case (is166 ? ConcurrentMode : AsyncMode) || NaN: return is166 ? 'ConcurrentMode' : 'AsyncMode';\n        case Fragment || NaN: return 'Fragment';\n        case StrictMode || NaN: return 'StrictMode';\n        case Profiler || NaN: return 'Profiler';\n        case Portal || NaN: return 'Portal';\n        case Suspense || NaN: return 'Suspense';\n        default:\n      }\n    }\n\n    const $$typeofType = type && type.$$typeof;\n\n    switch ($$typeofType) {\n      case ContextConsumer || NaN: return 'ContextConsumer';\n      case ContextProvider || NaN: return 'ContextProvider';\n      case Memo || NaN: {\n        const nodeName = displayNameOfNode(node);\n        return typeof nodeName === 'string' ? nodeName : `Memo(${displayNameOfNode(type)})`;\n      }\n      case ForwardRef || NaN: {\n        if (type.displayName) {\n          return type.displayName;\n        }\n        const name = displayNameOfNode({ type: type.render });\n        return name ? `ForwardRef(${name})` : 'ForwardRef';\n      }\n      case Lazy || NaN: {\n        return 'lazy';\n      }\n      default: return displayNameOfNode(node);\n    }\n  }\n\n  isValidElement(element) {\n    return isElement(element);\n  }\n\n  isValidElementType(object) {\n    return !!object && isValidElementType(object);\n  }\n\n  isFragment(fragment) {\n    return typeOfNode(fragment) === Fragment;\n  }\n\n  isCustomComponent(type) {\n    const fakeElement = makeFakeElement(type);\n    return !!type && (\n      typeof type === 'function'\n      || isForwardRef(fakeElement)\n      || isContextProvider(fakeElement)\n      || isContextConsumer(fakeElement)\n      || isSuspense(fakeElement)\n    );\n  }\n\n  isContextConsumer(type) {\n    return !!type && isContextConsumer(makeFakeElement(type));\n  }\n\n  isCustomComponentElement(inst) {\n    if (!inst || !this.isValidElement(inst)) {\n      return false;\n    }\n    return this.isCustomComponent(inst.type);\n  }\n\n  getProviderFromConsumer(Consumer) {\n    // React stores references to the Provider on a Consumer differently across versions.\n    if (Consumer) {\n      let Provider;\n      if (Consumer._context) { // check this first, to avoid a deprecation warning\n        ({ Provider } = Consumer._context);\n      } else if (Consumer.Provider) {\n        ({ Provider } = Consumer);\n      }\n      if (Provider) {\n        return Provider;\n      }\n    }\n    throw new Error('Enzyme Internal Error: can’t figure out how to get Provider from Consumer');\n  }\n\n  createElement(...args) {\n    return React.createElement(...args);\n  }\n\n  wrapWithWrappingComponent(node, options) {\n    return {\n      RootFinder,\n      node: wrapWithWrappingComponent(React.createElement, node, options),\n    };\n  }\n}\n\nmodule.exports = ReactSixteenAdapter;\n"]},"metadata":{},"sourceType":"script"}