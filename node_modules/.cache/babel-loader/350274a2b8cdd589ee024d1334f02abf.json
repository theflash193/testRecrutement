{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\gordon\\\\Desktop\\\\testRecrutement\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\gordon\\\\Desktop\\\\testRecrutement\\\\src\\\\screens\\\\Articles.js\";\nimport React, { Component } from 'react';\nimport Card from '../components/Card.js';\nimport { Spinner, Row, Col, Container } from 'react-bootstrap';\nconst INITIAL_STATE = {\n  articles: [],\n  filterArticles: [],\n  selectedArticles: [],\n  filter: \"\",\n  isLoaded: true,\n  isSucceed: false,\n  error: {}\n};\n\nclass Articles extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handlerFilter = e => {\n      let filter;\n      e.preventDefault();\n\n      if (e.target.value === \"\") {\n        this.setState(_objectSpread({}, this.state, {\n          filter: \"\",\n          filterArticles: this.state.articles\n        }));\n      } else {\n        filter = this.state.articles.filter(article => article.title.includes(e.target.value));\n        this.setState(_objectSpread({}, this.state, {\n          filter: e.target.value,\n          filterArticles: filter\n        }));\n      }\n    };\n\n    this.HandlerAddArticle = id => {\n      let index;\n      let updateArray;\n      console.log(id);\n      console.log(this.state.selectedArticles.indexOf(article => article.id === id));\n      console.log(this.state.selectedArticles);\n\n      if (index = this.state.selectedArticles.indexOf(article => article.id === id) === -1) {\n        console.log(this.state.selectedArticles.indexOf(article => article.id === id));\n        this.setState(_objectSpread({}, this.state, {\n          selectedArticles: this.state.selectedArticles.concat(this.state.articles[id])\n        }));\n      } else {\n        this.setState(_objectSpread({}, this.state, {\n          selectedArticles: this.state.selectedArticles.filter(article => article.id !== id)\n        }));\n      }\n    };\n\n    this.state = INITIAL_STATE;\n  }\n\n  componentDidMount() {\n    fetch(\"http://henri-potier.xebia.fr/books\").then(data => data.json()).then(data => {\n      // Adding id property for each article\n      const articles = data.map((article, index) => {\n        const a = _objectSpread({}, article, {\n          id: index\n        });\n\n        return a;\n      });\n      this.setState(_objectSpread({}, this.state, {\n        articles: articles,\n        filterArticles: articles,\n        isSucceed: true\n      }));\n    }).catch(err => this.setState(_objectSpread({}, INITIAL_STATE, {\n      error: err,\n      isSucceed: false\n    })));\n  }\n\n  render() {\n    console.log(this.state);\n    const Cards = this.state.isSucceed && this.state.filterArticles !== undefined ? this.state.filterArticles.map((article, index) => {\n      return React.createElement(Card, {\n        key: index.toString(),\n        article: article,\n        onClick: () => {\n          this.HandlerAddArticle(index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      });\n    }) : React.createElement(Spinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    });\n    console.log(this.state); // console.log(this.HandlerAddArticle(2));\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 3,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Recherche :\"), React.createElement(\"input\", {\n      style: {\n        height: 40,\n        width: \"100%\"\n      },\n      type: \"search\",\n      placeholder: \"sorcier\",\n      onChange: e => {\n        this.handlerFilter(e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    })), React.createElement(Col, {\n      lg: 9,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, Cards))))));\n  }\n\n}\n\nexport default Articles;","map":{"version":3,"sources":["C:/Users/gordon/Desktop/testRecrutement/src/screens/Articles.js"],"names":["React","Component","Card","Spinner","Row","Col","Container","INITIAL_STATE","articles","filterArticles","selectedArticles","filter","isLoaded","isSucceed","error","Articles","constructor","props","handlerFilter","e","preventDefault","target","value","setState","state","article","title","includes","HandlerAddArticle","id","index","updateArray","console","log","indexOf","concat","componentDidMount","fetch","then","data","json","map","a","catch","err","render","Cards","undefined","toString","height","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Card from '../components/Card.js';\r\nimport { Spinner, Row, Col, Container } from 'react-bootstrap';\r\n\r\nconst INITIAL_STATE = {\r\n    articles: [],\r\n    filterArticles: [],\r\n    selectedArticles: [],\r\n    filter: \"\",\r\n    isLoaded: true,\r\n    isSucceed: false,\r\n    error: {},\r\n}\r\n\r\nclass Articles extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = INITIAL_STATE;\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(\"http://henri-potier.xebia.fr/books\")\r\n            .then(data => data.json())\r\n            .then(data => {\r\n                // Adding id property for each article\r\n                const articles = data.map((article, index) => { const a = {...article, id: index} ; return a});\r\n\r\n                this.setState({ ...this.state, articles: articles, filterArticles: articles, isSucceed: true })\r\n            })\r\n            .catch(err => this.setState({ ...INITIAL_STATE, error: err , isSucceed: false}))\r\n    }\r\n\r\n    handlerFilter = (e) => {\r\n        let filter;\r\n        \r\n        e.preventDefault();\r\n        if (e.target.value === \"\") { \r\n            this.setState({ ...this.state, filter: \"\", filterArticles: this.state.articles})\r\n        } else {\r\n            filter = this.state.articles.filter(article => article.title.includes(e.target.value));\r\n            this.setState({ ...this.state, filter: e.target.value, filterArticles: filter});\r\n        }\r\n    }\r\n\r\n    HandlerAddArticle = (id) => {\r\n        let index;\r\n        let updateArray;\r\n\r\n        console.log(id)\r\n        console.log(this.state.selectedArticles.indexOf(article =>  article.id === id))\r\n        console.log(this.state.selectedArticles)\r\n        if (index = this.state.selectedArticles.indexOf(article => article.id === id) === -1) {\r\n            console.log(this.state.selectedArticles.indexOf(article => article.id === id))\r\n            this.setState({...this.state, selectedArticles: this.state.selectedArticles.concat(this.state.articles[id])})\r\n        } else { \r\n            this.setState({...this.state, selectedArticles: this.state.selectedArticles.filter(article => article.id !== id)})\r\n        }\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state);\r\n        const Cards = (this.state.isSucceed && this.state.filterArticles !== undefined) ? \r\n            this.state.filterArticles.map((article, index) => {\r\n            return <Card key={index.toString()} article={article} onClick={() => {this.HandlerAddArticle(index)}}></Card> \r\n            })\r\n            :\r\n            <Spinner></Spinner>;\r\n\r\n        console.log(this.state);\r\n        // console.log(this.HandlerAddArticle(2));\r\n        return (<div>\r\n                <Container>\r\n                    <Row>\r\n                        <Col lg={3} xs={12}>\r\n                            <p>Recherche :</p>\r\n                            <input style={{height: 40, width: \"100%\"}} type=\"search\" placeholder=\"sorcier\" onChange={(e) => {this.handlerFilter(e)}}></input>\r\n                        </Col>\r\n                        <Col lg={9} xs={12}>\r\n                            <Container>\r\n                                <Row>\r\n                                        {Cards}\r\n                                </Row>\r\n                            </Container>\r\n                        </Col >\r\n                    </Row>\r\n                </Container>\r\n            </div>);\r\n    }\r\n}\r\n\r\nexport default Articles;\r\n"]},"metadata":{},"sourceType":"module"}